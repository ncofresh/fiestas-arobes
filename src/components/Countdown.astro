---
const targetDate = '2025-08-16T00:00:00'; 
---
<section id="cuenta-atras" class="py-16 bg-white">
  <div class="max-w-4xl mx-auto px-4 text-center">
    <h3 class="text-2xl font-display text-gris-piedra mb-2">¡Ya queda menos!</h3>
    <h2 class="section-title">Próxima Fiesta: San Roque</h2>
    <div id="timer" class="flex justify-center gap-4 md:gap-8 text-center">
      <div class="bg-blanco-roto p-4 rounded-lg w-24">
        <span id="days" class="text-4xl md:text-5xl font-bold text-verde-prado">00</span>
        <span class="block text-sm text-gris-piedra">Días</span>
      </div>
      <div class="bg-blanco-roto p-4 rounded-lg w-24">
        <span id="hours" class="text-4xl md:text-5xl font-bold text-verde-prado">00</span>
        <span class="block text-sm text-gris-piedra">Horas</span>
      </div>
      <div class="bg-blanco-roto p-4 rounded-lg w-24">
        <span id="minutes" class="text-4xl md:text-5xl font-bold text-verde-prado">00</span>
        <span class="block text-sm text-gris-piedra">Minutos</span>
      </div>
      <div class="bg-blanco-roto p-4 rounded-lg w-24">
        <span id="seconds" class="text-4xl md:text-5xl font-bold text-verde-prado">00</span>
        <span class="block text-sm text-gris-piedra">Segundos</span>
      </div>
    </div>
  </div>
</section>

<script define:vars={{ targetDate }}>
  const timerEl = document.getElementById('timer');
  const daysEl = document.getElementById('days');
  const hoursEl = document.getElementById('hours');
  const minutesEl = document.getElementById('minutes');
  const secondsEl = document.getElementById('seconds');

  function updateCountdown() {
    const target = new Date(targetDate).getTime();
    const now = new Date().getTime();
    const difference = target - now;

    if (difference <= 0) {
      if(timerEl) timerEl.innerHTML = '<p class="text-3xl font-bold text-verde-prado">¡La fiesta ya ha comenzado!</p>';
      clearInterval(interval);
      return;
    }

    const days = Math.floor(difference / (1000 * 60 * 60 * 24));
    const hours = Math.floor((difference % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
    const minutes = Math.floor((difference % (1000 * 60 * 60)) / (1000 * 60));
    const seconds = Math.floor((difference % (1000 * 60)) / 1000);

    if (daysEl) daysEl.textContent = String(days).padStart(2, '0');
    if (hoursEl) hoursEl.textContent = String(hours).padStart(2, '0');
    if (minutesEl) minutesEl.textContent = String(minutes).padStart(2, '0');
    if (secondsEl) secondsEl.textContent = String(seconds).padStart(2, '0');
  }

  const interval = setInterval(updateCountdown, 1000);
  updateCountdown();
</script>